<div class="container">
  <div class="form">
    <h2>ورود یا ثبت نام</h2>
    <mat-button-toggle-group
      hideSingleSelectionIndicator
      (change)="changFormState($event)"
    >
      <mat-button-toggle value="users" checked>کاربران</mat-button-toggle>
      <mat-button-toggle value="operators">اپراتور ها</mat-button-toggle>
      <mat-button-toggle value="managers">مدیران</mat-button-toggle>
    </mat-button-toggle-group>
    <div class="inside">
      @if (formState == 'users') {
      <mat-button-toggle-group
        hideSingleSelectionIndicator
        (change)="changFormMode($event)"
      >
        <mat-button-toggle value="signUp">ثبت نام</mat-button-toggle>
        <mat-button-toggle value="logIn" checked>ورود</mat-button-toggle>
      </mat-button-toggle-group>
      @if (formMode == 'signUp') {
      <form [formGroup]="signUpUserForm" (ngSubmit)="signUpUser()">
        <mat-form-field hideRequiredMarker>
          <mat-label>نام</mat-label>
          <input matInput type="text" formControlName="firstName" />
        </mat-form-field>
        <mat-form-field hideRequiredMarker>
          <mat-label>نام خانوادگی</mat-label>
          <input matInput type="text" formControlName="lastName" />
        </mat-form-field>
        <mat-form-field hideRequiredMarker>
          <mat-label>نام کاربری</mat-label>
          <input matInput type="text" formControlName="userName" />
        </mat-form-field>
        <mat-form-field hideRequiredMarker>
          <mat-label>رمز عبور</mat-label>
          <input matInput type="password" formControlName="password" />
        </mat-form-field>
        <mat-form-field hideRequiredMarker>
          <mat-label>شماره تماس</mat-label>
          <input matInput type="text" formControlName="phoneNumber" />
        </mat-form-field>
        <mat-form-field hideRequiredMarker>
          <mat-label>شهر فعلی</mat-label>
          <input matInput type="text" formControlName="currentCity" />
        </mat-form-field>
        <button
          type="submit"
          mat-flat-button
          [disabled]="signUpUserForm.invalid"
        >
          ثبت نام
        </button>
      </form>
      } @else {
      <form [formGroup]="logInUserForm" (ngSubmit)="logInUser()">
        <mat-form-field hideRequiredMarker>
          <mat-label>نام کاربری</mat-label>
          <input matInput type="text" formControlName="userName" />
        </mat-form-field>
        <mat-form-field hideRequiredMarker>
          <mat-label>رمز عبور</mat-label>
          <input matInput type="password" formControlName="password" />
        </mat-form-field>
        <button type="submit" mat-button [disabled]="logInUserForm.invalid">
          ورود
        </button>
      </form>
      } } @else if (formState == 'operators') {
      <mat-button-toggle-group
        hideSingleSelectionIndicator
        (change)="changFormMode($event)"
      >
        <mat-button-toggle value="signUp">ثبت نام</mat-button-toggle>
        <mat-button-toggle value="logIn" checked>ورود</mat-button-toggle>
      </mat-button-toggle-group>
      @if (formMode == 'signUp') {
      <form [formGroup]="signUpOperatorForm" (ngSubmit)="signUpOperator()">
        <mat-form-field hideRequiredMarker>
          <mat-label>نام</mat-label>
          <input matInput type="text" formControlName="firstName" />
        </mat-form-field>
        <mat-form-field hideRequiredMarker>
          <mat-label>نام خانوادگی</mat-label>
          <input matInput type="text" formControlName="lastName" />
        </mat-form-field>
        <mat-form-field hideRequiredMarker>
          <mat-label>نام کاربری</mat-label>
          <input matInput type="text" formControlName="userName" />
        </mat-form-field>
        <mat-form-field hideRequiredMarker>
          <mat-label>رمز عبور</mat-label>
          <input matInput type="password" formControlName="password" />
        </mat-form-field>
        <mat-form-field hideRequiredMarker>
          <mat-label>شماره تماس</mat-label>
          <input matInput type="text" formControlName="phoneNumber" />
        </mat-form-field>
        <mat-form-field hideRequiredMarker>
          <mat-label>شهر فعلی</mat-label>
          <input matInput type="text" formControlName="selectedCity" />
        </mat-form-field>
        <button
          type="submit"
          mat-flat-button
          [disabled]="signUpOperatorForm.invalid"
        >
          ثبت نام
        </button>
      </form>
      } @else {
      <form [formGroup]="logInOperatorForm" (ngSubmit)="logInOperator()">
        <mat-form-field hideRequiredMarker>
          <mat-label>نام کاربری</mat-label>
          <input matInput type="text" formControlName="userName" />
        </mat-form-field>
        <mat-form-field hideRequiredMarker>
          <mat-label>رمز عبور</mat-label>
          <input matInput type="password" formControlName="password" />
        </mat-form-field>
        <button type="submit" mat-button [disabled]="logInOperatorForm.invalid">
          ورود
        </button>
      </form>
      } } @else {
        <form [formGroup]="logInManagerForm" (ngSubmit)="logInManager()">
          <mat-form-field hideRequiredMarker>
            <mat-label>نام کاربری</mat-label>
            <input matInput type="text" formControlName="userName" />
          </mat-form-field>
          <mat-form-field hideRequiredMarker>
            <mat-label>رمز عبور</mat-label>
            <input matInput type="password" formControlName="password" />
          </mat-form-field>
          <button type="submit" mat-button [disabled]="logInManagerForm.invalid">
            ورود
          </button>
        </form>
      }
    </div>
  </div>
</div>
